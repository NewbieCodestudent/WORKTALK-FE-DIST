"use strict";(self["webpackChunkworktalk"]=self["webpackChunkworktalk"]||[]).push([[40],{3067:function(e,t,s){s.d(t,{Pf:function(){return l},SK:function(){return r},ZP:function(){return d},_u:function(){return o},dQ:function(){return p},dq:function(){return i},k2:function(){return n},qv:function(){return u},uJ:function(){return c}});var a=s(3376);function n(){return a.x.get("host/spaceAll")}function i(){return a.x.get("hostActivated")}function c(e){return a.x.post("host/spaceCreate",e,{headers:{"Content-Type":"multipart/form-data"}})}function p(e,t){return a.x.post("host/spaceUpdate/"+e,t,{headers:{"Content-Type":"multipart/form-data"}})}function l(e){return a.x["delete"]("spaceImgDelete",{params:{spaceImgId:e}})}function r(e){return a.x.post("host/roomCreate",e,{headers:{"Content-Type":"multipart/form-data"}})}function o(e,t){return a.x.post("host/roomUpdate/"+e,t,{headers:{"Content-Type":"multipart/form-data"}})}function d(e){return a.x["delete"]("roomImgDelete",{params:{roomImgId:e}})}function u(e){return a.x["delete"]("host/spaceDelete/"+e)}},6040:function(e,t,s){s.r(t),s.d(t,{default:function(){return z}});var a=s(3396);const n={class:"backgound"};function i(e,t,s,i,c,p){const l=(0,a.up)("space-create-from");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a.Wm)(l)])}var c=s(9242),p=s(7139);const l=e=>((0,a.dD)("data-v-52f118bc"),e=e(),(0,a.Cn)(),e),r={class:"createBox"},o={class:"spaceType"},d=l((()=>(0,a._)("span",null,"공간생성",-1))),u={class:"spaceTypeItems"},h=["onClick"],m=["src"],g={class:"spaceName boxName"},C=l((()=>(0,a._)("br",null,null,-1))),D={key:0,class:"warning warningMsg"},f={class:"spaceDetail boxName"},I=l((()=>(0,a._)("span",null,"공간소개",-1))),A=l((()=>(0,a._)("br",null,null,-1))),y={key:0,class:"warning warningMsg"},_={class:"spaceAddress boxName"},w=l((()=>(0,a._)("span",null,"공간주소",-1))),x=l((()=>(0,a._)("br",null,null,-1))),v=l((()=>(0,a._)("br",null,null,-1))),L={class:"regCode boxName"},M=l((()=>(0,a._)("span",null,"사업자번호",-1))),k=l((()=>(0,a._)("br",null,null,-1))),E=l((()=>(0,a._)("span",{class:"boxName"},"공간사진등록",-1))),b={class:"imgBox"},S=["onClick"],$=["src"],N={class:"spaceImg"},T=l((()=>(0,a._)("label",{for:"imgBtn",class:"imgBtn"},"사진추가",-1))),O=l((()=>(0,a._)("button",{class:"submit"}," 공간생성 ",-1)));function K(e,t,n,i,l,K){return(0,a.wg)(),(0,a.iD)("div",r,[(0,a._)("form",{class:"createFrom",enctype:"multipart/form-data",onSubmit:t[12]||(t[12]=(0,c.iM)(((...e)=>K.spaceCreateCheck&&K.spaceCreateCheck(...e)),["prevent"]))},[(0,a._)("div",o,[d,(0,a._)("div",u,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.spaceTypeItems,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:(0,p.C_)(["spaceTypeItem",l.spaceTypeSelectData==e.name?"selectType":"noSelectType"]),onClick:t=>K.spaceTypeSelect(e)},[(0,a._)("img",{class:"spaceTypeIcon",src:s(7173)(`./${e.img}`),alt:"icon"},null,8,m),(0,a._)("p",null,(0,p.zw)(e.name),1)],10,h)))),128))])]),(0,a._)("div",g,[(0,a.Uk)(" 공간명 "),(0,a._)("span",{class:(0,p.C_)(["textCount",{warning:l.spaceName.length>=20}])},(0,p.zw)(l.spaceNameCount)+"/20자",3),C,(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.spaceName=e),class:"inputBox",type:"text",placeholder:"공간의 이름을 작성해주세요.",onKeyup:t[1]||(t[1]=(...e)=>K.spaceNameCountCheck&&K.spaceNameCountCheck(...e))},null,544),[[c.nr,l.spaceName]]),l.spaceName.length>=20?((0,a.wg)(),(0,a.iD)("p",D," 제목은 20자까지 가능합니다. ")):(0,a.kq)("",!0)]),(0,a._)("div",f,[I,(0,a._)("span",{class:(0,p.C_)(["textCount",{warning:l.spaceDetail.length>=100}])},(0,p.zw)(l.spaceDetailCount)+"/100자",3),A,(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.spaceDetail=e),class:"inputBox spaceDetailBox",name:"",rows:"5",placeholder:"공간을 소개해 주세요.",onKeypress:t[3]||(t[3]=(...e)=>K.spaceDetailCountCheck&&K.spaceDetailCountCheck(...e)),onKeyup:t[4]||(t[4]=(...e)=>K.spaceDetailCountCheck&&K.spaceDetailCountCheck(...e))},null,544),[[c.nr,l.spaceDetail]]),l.spaceDetail.length>=100?((0,a.wg)(),(0,a.iD)("p",y," 설명은 100자까지 가능합니다. ")):(0,a.kq)("",!0)]),(0,a._)("div",_,[w,x,(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.postcode=e),class:"inputBox postCodeBox",type:"text",placeholder:"우편번호"},null,512),[[c.nr,l.postcode]]),(0,a._)("input",{class:"postCodeBtn",type:"button",value:"우편번호 찾기",onClick:t[6]||(t[6]=(...e)=>K.execDaumPostcode&&K.execDaumPostcode(...e))}),v,(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.address=e),class:"inputBox addressBox",type:"text",name:"address",placeholder:"주소"},null,512),[[c.nr,l.address]]),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.detailAddress=e),class:"inputBox detailAddressBox",type:"text",placeholder:"상세주소"},null,512),[[c.nr,l.detailAddress]])]),(0,a._)("div",L,[M,k,(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.regCode=e),class:"inputBox",maxlength:"12",type:"text",placeholder:"사업자번호",onKeypress:t[10]||(t[10]=(...e)=>K.regCodeKeypress&&K.regCodeKeypress(...e))},null,544),[[c.nr,l.regCode]])]),E,(0,a._)("div",b,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.spaceImgPreview,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e,class:"filePreview"},[(0,a._)("i",{class:"fa-solid fa-xmark previewImgDelete fa-lg",onClick:t=>K.fileDeleteButton(e.num)},null,8,S),(0,a._)("img",{class:"preViewImg",src:e.url},null,8,$)])))),128)),(0,a._)("div",N,[T,(0,a._)("input",{id:"imgBtn",ref:"spaceImg",type:"file",multiple:"",accept:".jpg, .png",hidden:"",onChange:t[11]||(t[11]=e=>K.fileUpload(e))},null,544)])]),O],32)])}s(7658);function V(e){e=e.replace(/[^0-9]/g,"");let t="";return e.length<4?e:e.length<7?(t+=e.substr(0,3),t+="-",t+=e.substr(3),t):(e.length,t+=e.substr(0,3),t+="-",t+=e.substr(3,2),t+="-",t+=e.substr(5),t)}var B=s(3067),P={data(){return{spaceType:"",spaceName:"",spaceDetail:"",postcode:"",address:"",detailAddress:"",regCode:"",spaceImg:[],spaceImgPreview:[],spaceNameCount:"0",spaceDetailCount:"0",spaceTypeItems:[{name:"오피스",img:"office.png",value:"1"},{name:"데스크",img:"table.png",value:"2"},{name:"회의실",img:"meeting.png",value:"3"}],spaceTypeSelectData:""}},computed:{},methods:{fileUpload(e){for(let t=0;t<e.target.files.length;t++)this.spaceImg=[...this.spaceImg,{file:e.target.files[t],num:t}];for(let t=0;t<e.target.files.length;t++)this.spaceImgPreview.push({url:URL.createObjectURL(e.target.files[t]),num:t})},fileDeleteButton(e){for(let t=0;t<this.spaceImg.length;t++)this.spaceImg[t].num==e&&this.spaceImg.splice(t,1);for(let t=0;t<this.spaceImgPreview.length;t++)this.spaceImgPreview[t].num==e&&this.spaceImgPreview.splice(t,1)},spaceTypeSelect(e){const t=e.value;this.spaceType=e.value,this.spaceTypeSelectData="1"==t?"오피스":"2"==t?"데스크":"회의실"},spaceNameCountCheck(){return this.spaceNameCount=this.spaceName.length},spaceDetailCountCheck(){return this.spaceDetailCount=this.spaceDetail.length},regCodeKeypress(){const e=V(this.regCode);this.regCode=e},execDaumPostcode(){new window.daum.Postcode({oncomplete:e=>{"R"===e.userSelectedType?this.address=e.roadAddress:this.address=e.jibunAddress,"R"===e.userSelectedType?(""!==e.bname&&/[동|로|가]$/g.test(e.bname)&&(this.detailAddress+=e.bname),""!==e.buildingName&&"Y"===e.apartment&&(this.detailAddress+=""!==this.detailAddress?`, ${e.buildingName}`:e.buildingName),""!==this.detailAddress&&(this.detailAddress=`(${this.detailAddress})`)):this.detailAddress="",this.postcode=e.zonecode}}).open()},spaceCreateCheck(){let e="";this.spaceType?this.spaceName?this.spaceName.length>20?(e="공간명이 20자를 초과하였습니다.",this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",e)):this.spaceDetail?this.spaceDetail.length>100?(e="공간명이 100자를 초과하였습니다.",this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",e)):this.postcode?this.address?this.detailAddress?this.regCode?12!=this.regCode.length?(e="사업자번호를 확인해주세요.",this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",e)):this.spaceImg?this.spaceCreate():(e="공간의 사진을 추가해주세요.",this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",e)):(e="사업자번호를 입력해주세요.",this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",e)):(e="상세주소를 입력해주세요.",this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",e)):(e="주소를 입력해주세요.",this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",e)):(e="우편번호를 입력해주세요.",this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",e)):(e="공간설명을 작성해주세요.",this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",e)):(e="공간명을 입력해주세요.",this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",e)):(e="공간유형을 선택해주세요.",this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",e))},async spaceCreate(){try{let e=new FormData;if(e.append("name",this.$store.state.nickName),e.append("spaceType",this.spaceType),e.append("spaceName",this.spaceName),e.append("spaceDetail",this.spaceDetail),e.append("postcode",this.postcode),e.append("address",this.address),e.append("detailAddress",this.detailAddress),e.append("regCode",this.regCode),this.spaceImg!=[])for(let s=0;s<this.spaceImg.length;s++)e.append("multipartFileList",this.spaceImg[s].file),console.log(this.spaceImg[s].file);const t=await(0,B.uJ)(e);console.log(t),200==t.status&&(alert("공간이 생성되었습니다. 방을 생성해 주세요."),this.$router.push("/host"))}catch(e){console.log(e)}}}},U=s(89);const W=(0,U.Z)(P,[["render",K],["__scopeId","data-v-52f118bc"]]);var G=W,R={components:{SpaceCreateFrom:G},created(){this.$store.dispatch("SPINNERVIEW")}};const q=(0,U.Z)(R,[["render",i],["__scopeId","data-v-1ea7c6a4"]]);var z=q}}]);
//# sourceMappingURL=40.c4de4008.js.map