"use strict";(self["webpackChunkworktalk"]=self["webpackChunkworktalk"]||[]).push([[468],{9468:function(i,e,t){t.r(e),t.d(e,{default:function(){return W}});var a=t(3396);const o=i=>((0,a.dD)("data-v-96d2ae8a"),i=i(),(0,a.Cn)(),i),s={class:"loginPage"},n=o((()=>(0,a._)("h1",null,"워크토크 로그인",-1)));function l(i,e,t,o,l,r){const c=(0,a.up)("form-login");return(0,a.wg)(),(0,a.iD)("div",s,[n,(0,a.Wm)(c)])}var r=t(9242);const c=i=>((0,a.dD)("data-v-1f55af67"),i=i(),(0,a.Cn)(),i),d={key:0,class:"loginBackground"},h={key:1,class:"findBoxEmail"},p={key:0,class:"approve"},k={key:1,class:"warning"},u={key:2,class:"findBoxPw"},m={key:0,class:"approve"},f={key:1,class:"warning"},C={class:"loginFromItems"},E={key:0,class:"warning"},g={class:"loginFromItems"},w=c((()=>(0,a._)("div",{class:"loginFromItems"},[(0,a._)("button",{id:"submit"}," 로그인 ")],-1))),y={class:"helpBox"},V=c((()=>(0,a._)("span",null,"회원가입",-1))),L={class:"kakaoLogin"},$=c((()=>(0,a._)("p",null,"또는",-1))),I=c((()=>(0,a._)("img",{src:"//k.kakaocdn.net/14/dn/btqCn0WEmI3/nijroPfbpCa4at5EIsjyf0/o.jpg"},null,-1))),_=[I];function A(i,e,t,o,s,n){const l=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",null,[""!=s.findBoxType?((0,a.wg)(),(0,a.iD)("div",d)):(0,a.kq)("",!0),"email"==s.findBoxType?((0,a.wg)(),(0,a.iD)("div",h,[(0,a._)("i",{class:"fa-solid fa-xmark findBoxClose fa-lg",onClick:e[0]||(e[0]=(...i)=>n.findBoxClose&&n.findBoxClose(...i))}),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[1]||(e[1]=i=>s.findEmail=i),class:"findEmail",type:"text",placeholder:"가입한 이메일을 입력해주세요."},null,512),[[r.nr,s.findEmail]]),(0,a._)("input",{class:"findEmailBtn",type:"button",value:"조회",onClick:e[2]||(e[2]=i=>n.emailVeificaionSend("email"))}),"N"==s.emailVerificationKakaoYn?((0,a.wg)(),(0,a.iD)("p",p," 가입된 이메일입니다. ")):(0,a.kq)("",!0),!s.emailVerificationKakaoYn&&200==s.emailVerificationCodeCheck||"Y"==s.emailVerificationKakaoYn?((0,a.wg)(),(0,a.iD)("p",k," 가입되지 않은 이메일입니다. ")):(0,a.kq)("",!0)])):(0,a.kq)("",!0),"pw"==s.findBoxType?((0,a.wg)(),(0,a.iD)("div",u,[(0,a._)("i",{class:"fa-solid fa-xmark findBoxClose fa-lg",onClick:e[3]||(e[3]=(...i)=>n.findBoxClose&&n.findBoxClose(...i))}),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[4]||(e[4]=i=>s.findEmail=i),class:"findEmail",type:"text",placeholder:"가입한 이메일을 입력해주세요."},null,512),[[r.nr,s.findEmail]]),(0,a._)("input",{class:"findEmailBtn",type:"button",value:"임시비밀번호발급",onClick:e[5]||(e[5]=i=>n.emailVeificaionSend("pw"))}),200==s.emailVerificationCodeCheck?((0,a.wg)(),(0,a.iD)("p",m," 임시비밀번호가 발급되었습니다. ")):(0,a.kq)("",!0),500==s.emailVerificationCodeCheck?((0,a.wg)(),(0,a.iD)("p",f," 가입되지 않은 이메일입니다. ")):(0,a.kq)("",!0)])):(0,a.kq)("",!0),(0,a._)("form",{class:"loginForm",onSubmit:e[12]||(e[12]=(0,r.iM)(((...i)=>n.loginCkeck&&n.loginCkeck(...i)),["prevent"]))},[(0,a._)("div",C,[(0,a.wy)((0,a._)("input",{id:"email","onUpdate:modelValue":e[6]||(e[6]=i=>s.email=i),type:"text",placeholder:"이메일"},null,512),[[r.nr,s.email]]),!n.userEmailValid&&s.email?((0,a.wg)(),(0,a.iD)("span",E,"이메일 형식이 아닙니다.")):(0,a.kq)("",!0)]),(0,a._)("div",g,[(0,a.wy)((0,a._)("input",{id:"pw","onUpdate:modelValue":e[7]||(e[7]=i=>s.pw=i),type:"password",placeholder:"비밀번호",onKeyup:e[8]||(e[8]=(0,r.D2)(((...i)=>n.loginEnterCkeck&&n.loginEnterCkeck(...i)),["enter"]))},null,544),[[r.nr,s.pw]])]),w,(0,a._)("div",y,[(0,a._)("span",{onClick:e[9]||(e[9]=i=>n.findBoxOpen("email"))},"이메일확인"),(0,a._)("span",{onClick:e[10]||(e[10]=i=>n.findBoxOpen("pw"))},"비밀번호찾기"),(0,a.Wm)(l,{to:"/join"},{default:(0,a.w5)((()=>[V])),_:1})]),(0,a._)("div",L,[$,(0,a._)("a",{onClick:e[11]||(e[11]=i=>n.kakaoLogin())},_)])],32)])}t(7658);var D=t(9895);function O(i){let e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(String(i).toLowerCase())}var v=t(1598),S={data(){return{email:"",pw:"",findEmail:"",emailVerificationCodeCheck:"",emailVerificationKakaoYn:"",findBoxType:""}},computed:{userEmailValid(){return O(this.email)}},created(){console.log(this.$route.query.token),console.log(this.$route.query.tel),this.$route.query.token&&("true"==this.$route.query.tel?this.kakaoTokenCall("tel"):this.kakaoTokenCall("notel"))},methods:{loginCkeck(){let i="";this.email?this.userEmailValid?this.pw?this.loginOk():(i="비밀번호를 입력해주세요.",this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",i)):(i="이메일 형식으로 입력해주세요.",this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",i)):(i="이메일을 입력해주세요.",this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",i))},loginEnterCkeck(){let i="";this.email?this.userEmailValid?this.loginOk():(i="이메일 형식으로 입력해주세요.",this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",i)):(i="이메일을 입력해주세요.",this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",i))},async loginOk(){const i={email:this.email,pw:this.pw};this.pwClear();try{const e=await this.$store.dispatch("LOGIN",i),t=(0,v.Z)(e.token);"ROLE_HOST"==t.auth?this.$router.push("/host"):"ROLE_MASTER"==t.auth?this.$router.push("/master"):this.$router.push("/")}catch(e){let i="이메일과 비밀번호를 확인해주세요.";this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",i)}},pwClear(){this.pw=""},findBoxOpen(i){this.findBoxType=i},findBoxClose(){this.findBoxType="",this.findEmail="",this.emailVerificationCodeCheck=""},async emailVeificaionSend(i){this.$store.dispatch("SPINNERVIEW",!0);try{let e;e="pw"==i?await(0,D.te)(this.findEmail):await(0,D.TS)(this.findEmail),console.log(e),this.emailVerificationCodeCheck=e.request.status,this.emailVerificationKakaoYn=e.data.KakaoYn}catch(e){console.log(e),this.emailVerificationCodeCheck=e.request.status}this.$store.dispatch("SPINNERVIEW",!1)},kakaoLogin(){window.Kakao.Auth.authorize({redirectUri:"http://15.165.247.125:8100/user/kakao/callback"})},async kakaoTokenCall(i){try{const e=this.$route.query.token;if(await this.$store.dispatch("KAKAOLOGIN",e),"tel"==i)this.$router.push("/");else{let i="예약을 이용하시려면 전화번호를 입력해주세요.";this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",i),this.$router.push("/profile")}}catch(e){console.log(e)}}}},x=t(89);const M=(0,x.Z)(S,[["render",A],["__scopeId","data-v-1f55af67"]]);var B=M,K={components:{FormLogin:B},created(){this.$store.dispatch("SPINNERVIEW",!1)}};const q=(0,x.Z)(K,[["render",l],["__scopeId","data-v-96d2ae8a"]]);var W=q}}]);
//# sourceMappingURL=468.da1e2c24.js.map