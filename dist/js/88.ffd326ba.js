"use strict";(self["webpackChunkworktalk"]=self["webpackChunkworktalk"]||[]).push([[88],{1779:function(e,a,t){t.d(a,{GK:function(){return p},HD:function(){return m},Kd:function(){return o},MR:function(){return d},T9:function(){return i},fZ:function(){return c},h:function(){return l},k9:function(){return v},mE:function(){return s},nF:function(){return g},om:function(){return r},wP:function(){return u}});var n=t(3376);function s(e,a,t,s,r,i,u){return n.e.get("reservations/isBooked",{params:{roomId:a,roomType:t,initDate:s,endDate:r,initTime:i,endTime:u,spaceType:e}})}function r(e){return n.x.post("/reservation/choose",e)}function i(e){return n.x.get("/reservation/findById",{params:{tempRedisReserveId:e}})}function u(e){return n.x.get("/reservation/delete/"+e)}function l(e){return n.x.post("reservation/reserve",e)}function o(e,a,t){return n.x.get("/reservation/find",{params:{pageNum:e,spaceType:a,reserveStatus:t}})}function p(e){return n.x.post("/reservation/cancel",e)}function c(e){return n.x.get("/reservation/end/"+e)}function m(e){return n.x.post("/payments/prepaid",e)}function g(e,a,t){return n.x.get("/payments/history",{params:{pageNum:e,payStatus:a,reserveDate:t}})}function v(){return n.x.get("/payments/rooms")}function d(e,a,t,s,r){return n.x.get("/payments/history",{params:{pageNum:e,payStatus:a,reserveDate:t,spaceType:s,roomName:r}})}},2900:function(e,a,t){t.d(a,{JY:function(){return i},Ju:function(){return o},OS:function(){return p},Zy:function(){return l},aq:function(){return r},bQ:function(){return s},lC:function(){return u}});var n=t(3376);function s(e,a,t,s,r,i,u,l){return n.e.get("main",{params:{pageNum:e,searchSpaceType:a,searchSpaceName:t,searchAddress:s,searchStartDate:r,searchEndDate:i,searchStartTime:u,searchEndTime:l}})}function r(e){return n.e.get("spaceOne/"+e)}function i(){return n.x.get("member/isValid")}function u(e){return n.e.get("spaceOne/"+e+"/rooms")}function l(e){return n.e.get("roomOne/"+e)}function o(){return n.x.get("mileage/total")}function p(){return n.x.get("mileage")}},6088:function(e,a,t){t.r(a),t.d(a,{default:function(){return Q}});var n=t(3396),s=t(7139);const r={class:"paymentBox"},i={class:"paymentTitle"};function u(e,a,t,u,l,o){const p=(0,n.up)("payments-user-vue"),c=(0,n.up)("mileage-user-vue");return(0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("div",null,[(0,n._)("div",i,[(0,n._)("span",{class:(0,s.C_)(l.pageView?"NowView":"NoView"),onClick:a[0]||(a[0]=(...e)=>o.pageViewChange&&o.pageViewChange(...e))},"결제내역",2),(0,n._)("span",{class:(0,s.C_)(l.pageView?"NoView":"NowView"),onClick:a[1]||(a[1]=(...e)=>o.pageViewChange&&o.pageViewChange(...e))},"마일리지",2)]),(0,n._)("div",null,[l.pageView?((0,n.wg)(),(0,n.j4)(p,{key:0})):((0,n.wg)(),(0,n.j4)(c,{key:1}))])])])}var l=t(9242);const o=e=>((0,n.dD)("data-v-790fc9c5"),e=e(),(0,n.Cn)(),e),p={class:"paymentContainer"},c={class:"paymentSortBox"},m=o((()=>(0,n._)("option",{value:"기간",hidden:""}," 결제기간 ",-1))),g=["value"],v=o((()=>(0,n._)("option",{value:"결제",hidden:""}," 결제상태 ",-1))),d=["value"],h={class:"paymentItems"},S=(0,n.uE)('<div class="paymentItemTitle" data-v-790fc9c5><span class="spaceNameTitle" data-v-790fc9c5>예약번호</span><span class="spaceNameTitle" data-v-790fc9c5>공간이름</span><span class="roomNameTitle" data-v-790fc9c5>방이름</span><span class="reserveDateTitle" data-v-790fc9c5>예약일</span><span class="paymentStatusTitle" data-v-790fc9c5>결제방법</span><span class="reserveStatusTitle" data-v-790fc9c5>예약상태</span><span class="payAmountTitle" data-v-790fc9c5>결제금액</span></div>',1),D={class:"spaceName"},w={class:"spaceName"},y={class:"roomName"},f={class:"reserveDate"},_={class:"reserveStatus"},N={class:"pageNumber"},C=["onClick"];function T(e,a,t,r,i,u){return(0,n.wg)(),(0,n.iD)("div",p,[(0,n._)("div",null,[(0,n._)("div",c,[(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>i.paymentSort=e),class:"paymentSort",onChange:a[1]||(a[1]=e=>u.paymentDataRequest(i.pageNowNum))},[m,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.paymentSortData,(e=>((0,n.wg)(),(0,n.iD)("option",{key:e,value:e.value},(0,s.zw)(e.name),9,g)))),128))],544),[[l.bM,i.paymentSort]]),(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>i.paymentStatus=e),class:"paymentSort payStatus",onChange:a[3]||(a[3]=e=>u.paymentDataRequest(i.pageNowNum))},[v,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.paymentStatusData,(e=>((0,n.wg)(),(0,n.iD)("option",{key:e,value:e.value},(0,s.zw)(e.name),9,d)))),128))],544),[[l.bM,i.paymentStatus]])]),(0,n._)("div",h,[S,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.paymentData,(e=>((0,n.wg)(),(0,n.iD)("div",{key:e,class:"paymentItem"},[(0,n._)("span",D,(0,s.zw)(e.reserveId),1),(0,n._)("span",w,(0,s.zw)(e.spaceName),1),(0,n._)("span",y,(0,s.zw)(e.roomName),1),(0,n._)("span",f,(0,s.zw)(u.reserveDateCheck(e.reserveDate)),1),(0,n._)("span",{class:(0,s.C_)(["paymentStatus","0"==e.paid?"paymentIng":"paymentEnd"])},(0,s.zw)(u.paymentStatusCheck(e.payStatus,e.reserveStatus)),3),(0,n._)("span",_,(0,s.zw)(u.reserveStatusRename(e.reserveStatus)),1),(0,n._)("span",{class:(0,s.C_)(["payAmount",u.reserveStatus(e.reserveStatus)])},(0,s.zw)(e.payAmount),3)])))),128))]),(0,n._)("div",N,[(0,n._)("span",null,[(0,n._)("i",{class:"fa-solid fa-chevron-left monthMoveBtn",onClick:a[4]||(a[4]=e=>u.pageMove("pre"))})]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.pageData,(e=>((0,n.wg)(),(0,n.iD)("span",{key:e,class:(0,s.C_)(e.class),onClick:a=>u.paymentDataRequest(e.value)},(0,s.zw)(e.value),11,C)))),128)),(0,n._)("span",null,[(0,n._)("i",{class:"fa-solid fa-chevron-right",onClick:a[5]||(a[5]=e=>u.pageMove("next"))})])])])])}t(7658);var E=t(1779),O={data(){return{paymentSortData:[{name:"전체",value:"기간"},{name:"1개월",value:"1"},{name:"3개월",value:"3"},{name:"6개월",value:"6"},{name:"1년",value:"12"}],paymentSort:"기간",paymentStatusData:[{name:"전 체",value:"결제"},{name:"보증금결제",value:"DEPOSIT"},{name:"선결제(완납)",value:"PREPAID"},{name:"후결제(예정)",value:"POSTPAID_BOOKED"},{name:"후결제(완납)",value:"POSTPAID_DONE"},{name:"환불",value:"REFUND"}],paymentStatus:"결제",paymentData:[],pageStartNum:1,pageNowNum:1,pageData:[],pageTotal:""}},created(){this.paymentDataRequest(this.pageNowNum)},methods:{async paymentDataRequest(e){this.paymentData=[];let a=this.paymentStatus,t=this.paymentSort;this.pageNowNum=e;try{"결제"==a&&(a=""),t="기간"==t?"":this.paymentSortChange(t),console.log(e-1,a,t);let n=await(0,E.nF)(e-1,a,t);this.paymentData=n.data.data,this.pageTotal=n.data.count,this.paging(this.pageNowNum)}catch(n){console.log(n)}this.$store.dispatch("SPINNERVIEW",!1)},paymentSortChange(e){const a=new Date;let t=a.getFullYear(),n=a.getMonth(),s=n-e,r=new Date(t,s).toISOString();return r=r.slice(0,-5),console.log(r),r},roomTypeCheck(e){let a;return a="OFFICE"==e?"오피스":"DESK"==e?"데스크":"회의실",a},paymentStatusCheck(e){return e="DEPOSIT"==e?"보증금결제":"PREPAID"==e?"선결제(완납)":"POSTPAID_BOOKED"==e?"후결제(예정)":"POSTPAID_DONE"==e?"후결제(완납)":"환불",e},reserveStatusRename(e){return"BOOKED"==e?"예약완료":"CANCELED_BY_USER"==e?"사용자취소":"CANCELED_BY_HOST"==e?"호스트취소":"NOSHOW"==e?"노쇼":"사용완료"},reserveDateCheck(e){const a=e.slice(0,10),t=e.slice(11,16);return`${a} ${t}`},reserveStatus(e){return"CANCELED_BY_USER"==e||"CANCELED_BY_HOST"==e?"minus":"plus"},paging(e){this.pageData=[],this.pageNowNum=e;let a,t=this.pageTotal;this.pageTotal=t%10!=0?parseInt(t/10)+1:t/10,this.pageTotal<6?a=this.pageTotal+1:(a=this.pageStartNum+5,a>=this.pageTotal&&(a=this.pageTotal+1));for(let n=this.pageStartNum;n<a;n++)e==n?this.pageData.push({value:n,class:"pageNowNum"}):this.pageData.push({value:n,class:""})},pageMove(e){"next"==e?(this.pageStartNum==this.pageTotal-1||(this.pageStartNum=this.pageStartNum+5),this.paging(this.pageStartNum)):(1==this.pageStartNum||(this.pageStartNum=this.pageStartNum-5),this.paging(this.pageStartNum)),this.paymentDataRequest(this.pageNowNum)}}},k=t(89);const I=(0,k.Z)(O,[["render",T],["__scopeId","data-v-790fc9c5"]]);var V=I;const A=e=>((0,n.dD)("data-v-21e7b4e2"),e=e(),(0,n.Cn)(),e),x={class:"mileageContainer"},R={class:"mileageOwnSortBox"},B={class:"mileageOwnBox"},P=A((()=>(0,n._)("span",{class:"mileageOwnTitle"},"보유마일리지",-1))),z={class:"mileageOwn"},b={class:"mileageOwnBox"},K=A((()=>(0,n._)("span",{class:"mileageOwnTitle"},"적립예정",-1))),Y={class:"mileageOwn"},U={class:"mileageItems"},q=(0,n.uE)('<div class="mileageItemTitle" data-v-21e7b4e2><span class="mileageRoomTitle" data-v-21e7b4e2>방이름</span><span class="mileageStatusTitle" data-v-21e7b4e2>적립/사용</span><span class="mileageUserTitle" data-v-21e7b4e2>마일리지</span><span class="mileageDateTitle" data-v-21e7b4e2>날짜</span></div>',1),H={class:"mileageRoom"},M={class:"mileageAmount"},F={class:"mileageDate"};function Z(e,a,t,r,i,u){return(0,n.wg)(),(0,n.iD)("div",x,[(0,n._)("div",null,[(0,n._)("div",R,[(0,n._)("div",B,[P,(0,n._)("span",z,(0,s.zw)(i.mileageOwn),1)]),(0,n._)("div",b,[K,(0,n._)("span",Y,(0,s.zw)(i.mileageScheduled),1)])]),(0,n._)("div",U,[q,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.mileageData,(e=>((0,n.wg)(),(0,n.iD)("div",{key:e,class:"mileageItem"},[(0,n._)("span",H,(0,s.zw)(e.roomName),1),(0,n._)("span",{class:(0,s.C_)(["mileageStatus",e.status])},(0,s.zw)(u.mileageStatusCheck(e.status)),3),(0,n._)("span",M,(0,s.zw)(u.mileageAmountCheck(e.status,e.mileageAmount)),1),(0,n._)("span",F,(0,s.zw)(e.mileageDate),1)])))),128))])])])}var L=t(2900),$={data(){return{mileageSort:"기간",mileageOwn:"0",mileageScheduled:"0",mileageData:""}},created(){this.mileageInquire()},methods:{async mileageInquire(){let e=await(0,L.OS)();console.log(e),this.mileageOwn=e.data.count,this.mileageScheduled=e.data.sum,this.mileageData=e.data.data},mileageStatusCheck(e){let a;return"SAVED"==e?a="적립":"USED"==e?a="사용":"TO_BE_SAVED"==e&&(a="적립예정"),a},mileageAmountCheck(e,a){let t;return"SAVED"==e?t="+"+a:"USED"==e?t="-"+a:"TO_BE_SAVED"==e&&(t="+"+a),t}}};const j=(0,k.Z)($,[["render",Z],["__scopeId","data-v-21e7b4e2"]]);var J=j,W={components:{PaymentsUserVue:V,MileageUserVue:J},data(){return{role:this.$store.state.role,pageView:!0}},methods:{pageViewChange(){this.pageView=!this.pageView}}};const G=(0,k.Z)(W,[["render",u],["__scopeId","data-v-42305b3e"]]);var Q=G}}]);
//# sourceMappingURL=88.ffd326ba.js.map