"use strict";(self["webpackChunkworktalk"]=self["webpackChunkworktalk"]||[]).push([[735],{1779:function(e,a,t){t.d(a,{GK:function(){return u},HD:function(){return v},Kd:function(){return c},MR:function(){return d},T9:function(){return r},fZ:function(){return p},h:function(){return l},k9:function(){return h},mE:function(){return n},nF:function(){return m},om:function(){return o},wP:function(){return i}});var s=t(3376);function n(e,a,t,n,o,r,i){return s.e.get("reservations/isBooked",{params:{roomId:a,roomType:t,initDate:n,endDate:o,initTime:r,endTime:i,spaceType:e}})}function o(e){return s.x.post("/reservation/choose",e)}function r(e){return s.x.get("/reservation/findById",{params:{tempRedisReserveId:e}})}function i(e){return s.x.get("/reservation/delete/"+e)}function l(e){return s.x.post("reservation/reserve",e)}function c(e,a,t){return s.x.get("/reservation/find",{params:{pageNum:e,spaceType:a,reserveStatus:t}})}function u(e){return s.x.post("/reservation/cancel",e)}function p(e){return s.x.get("/reservation/end/"+e)}function v(e){return s.x.post("/payments/prepaid",e)}function m(e,a,t){return s.x.get("/payments/history",{params:{pageNum:e,payStatus:a,reserveDate:t}})}function h(){return s.x.get("/payments/rooms")}function d(e,a,t,n,o){return s.x.get("/payments/history",{params:{pageNum:e,payStatus:a,reserveDate:t,spaceType:n,roomName:o}})}},7516:function(e,a,t){t.d(a,{Pe:function(){return l},TN:function(){return r},Vw:function(){return o},_$:function(){return n},n9:function(){return i}});var s=t(3376);function n(e){return s.x.post("reviewCreate",e)}function o(e,a){return s.x.post("reviewUpdate/"+e,a)}function r(e){return s.x["delete"]("reviewDelete/"+e)}function i(e,a){return s.e.get("spaceOne/reviews",{params:{spaceId:a,pageNum:e}})}function l(e){return s.x.get("myreviews",{params:{pageNum:e}})}},9735:function(e,a,t){t.r(a),t.d(a,{default:function(){return xe}});var s=t(3396);const n=e=>((0,s.dD)("data-v-523ab447"),e=e(),(0,s.Cn)(),e),o={class:"reservationPage"},r=n((()=>(0,s._)("div",{class:"customerCenterTitle"},[(0,s._)("span",null,"예약리스트")],-1)));function i(e,a,t,n,i,l){const c=(0,s.up)("user-reservation-vue"),u=(0,s.up)("host-reservation-vue");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",null,[r,"ROLE_USER"==i.role?((0,s.wg)(),(0,s.j4)(c,{key:0})):((0,s.wg)(),(0,s.j4)(u,{key:1}))])])}var l=t(7139),c=t(9242);const u=e=>((0,s.dD)("data-v-22046b39"),e=e(),(0,s.Cn)(),e),p={class:"reservationContainer"},v={class:"reservationTitle"},m=u((()=>(0,s._)("option",{value:"예약상태",hidden:""}," 예약상태 ",-1))),h=["value"],d=u((()=>(0,s._)("option",{value:"공간종류",hidden:""}," 공간종류 ",-1))),g=["value"],C={class:"reservationItems"},D=(0,s.uE)('<div class="reservationItem" data-v-22046b39><span class="roomTypeTitle" data-v-22046b39>방종류</span><span class="roomName itemTitle" data-v-22046b39>방이름</span><span class="reservaStatusTitle" data-v-22046b39>예약상태</span><span class="reserveTimeTitle itemTitle" data-v-22046b39>예약일</span><span class="amountTitle itemTitle" data-v-22046b39>예약금</span><span class="reservationCancel itemTitle" data-v-22046b39>비 고</span></div>',1),w={class:"roomName"},k={class:"reserveTime"},S={class:"amount"},_=["onClick"],N={key:1,class:"reservationCancelBox"},b=["onClick"],y=["onClick"],I={key:3,class:"amountLeaveBox"},x=["onClick"],T=["onClick"],R={key:5,class:"reservationCancelReasonBox"},E=["onClick"],f={class:"pageNumber"},O=["onClick"];function B(e,a,t,n,o,r){const i=(0,s.up)("form-review");return(0,s.wg)(),(0,s.iD)("div",p,[o.background?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"background",onClick:a[0]||(a[0]=e=>r.boxClose())})):(0,s.kq)("",!0),(0,s._)("div",v,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>o.sortReserveStatus=e),class:"sortBox",onChange:a[2]||(a[2]=e=>r.reservationDataCall(o.pageNowNum))},[m,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.sortReserveStatusData,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e,value:e.value},(0,l.zw)(e.name),9,h)))),128))],544),[[c.bM,o.sortReserveStatus]]),(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>o.sortSpaceType=e),class:"sortBox",onChange:a[4]||(a[4]=e=>r.reservationDataCall(o.pageNowNum))},[d,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.sortSpaceTypeData,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e,value:e.value},(0,l.zw)(e.name),9,g)))),128))],544),[[c.bM,o.sortSpaceType]])]),(0,s._)("div",C,[D,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.reservationData,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"reservationItem"},[(0,s._)("span",{class:(0,l.C_)(["roomType",e.roomType])},(0,l.zw)(r.roomTypeRename(e.roomType)),3),(0,s._)("span",w,(0,l.zw)(e.roomName),1),(0,s._)("span",{class:(0,l.C_)(["reserveStatus",e.reserveStatus])},(0,l.zw)(r.reserveStatusRename(e.reserveStatus)),3),(0,s._)("span",k,(0,l.zw)(r.reserveTime(e.bookDate.reserveDate)),1),(0,s._)("span",S,(0,l.zw)(e.reserveAmount),1),r.cancelPossible(e)?((0,s.wg)(),(0,s.iD)("span",{key:0,class:"reservationCancelBtn",onClick:a=>r.boxOpen("cancel",t,e)},"예약취소",8,_)):(0,s.kq)("",!0),o.cancelIndex==t?((0,s.wg)(),(0,s.iD)("div",N,[(0,s._)("p",{class:(0,l.C_)(o.cancelReason.length>=100?"warning":"")},(0,l.zw)(o.cancelReason.length)+"/100자 ",3),(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":a[5]||(a[5]=e=>o.cancelReason=e),cols:"30",rows:"5",placeholder:"취소사유를 입력해주세요"},null,512),[[c.nr,o.cancelReason]]),(0,s._)("span",{class:"closeBtn",onClick:a[6]||(a[6]=e=>r.boxClose())},"닫기"),(0,s._)("span",{class:"reservationCancelDo",onClick:a=>r.reservationCancel(e)},"취소",8,b)])):(0,s.kq)("",!0),r.amountLeaveCheck(e)?((0,s.wg)(),(0,s.iD)("span",{key:2,class:"amountLeaveBtn",onClick:e=>r.boxOpen("amountLeave",t)},"잔금결제",8,y)):(0,s.kq)("",!0),o.amountLeaveIndex==t?((0,s.wg)(),(0,s.iD)("div",I,[(0,s._)("p",null,"결제잔금 "+(0,l.zw)(.8*e.reserveAmount)+"원을 결제하시겠습니까?",1),(0,s._)("span",{class:"closeBtn",onClick:a[7]||(a[7]=e=>r.boxClose())},"닫기"),(0,s._)("span",{class:"paymentBtn",onClick:a=>r.paymentLeave(e)},"결제",8,x)])):(0,s.kq)("",!0),r.cancelReasonView(e)?((0,s.wg)(),(0,s.iD)("span",{key:4,class:"cancelReason",onClick:e=>r.boxOpen("cancelReason",t)},"취소사유보기",8,T)):(0,s.kq)("",!0),o.cancelReasonIndex==t?((0,s.wg)(),(0,s.iD)("div",R,[(0,s._)("p",null,(0,l.zw)(e.cancelReason),1),(0,s._)("span",{class:"closeBtn",onClick:a[8]||(a[8]=e=>r.boxClose())},"닫기")])):(0,s.kq)("",!0),r.reviewPossible(e)?((0,s.wg)(),(0,s.iD)("span",{key:6,class:"reviewBtn",onClick:a=>r.boxOpen("review",t,e)},"후기작성",8,E)):(0,s.kq)("",!0),o.reviewIndex==t?((0,s.wg)(),(0,s.j4)(i,{key:7,"reserve-id":o.reserveId,"onBoxClose:boxCloseClick":r.boxClose,"onReveiwSubmit:submitClick":r.reviewSubmit},null,8,["reserve-id","onBoxClose:boxCloseClick","onReveiwSubmit:submitClick"])):(0,s.kq)("",!0)])))),128))]),(0,s._)("div",f,[(0,s._)("span",null,[(0,s._)("i",{class:"fa-solid fa-chevron-left monthMoveBtn",onClick:a[9]||(a[9]=e=>r.pageMove("pre"))})]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pageData,(e=>((0,s.wg)(),(0,s.iD)("span",{key:e,class:(0,l.C_)(e.class),onClick:a=>r.reservationDataCall(e.value)},(0,l.zw)(e.value),11,O)))),128)),(0,s._)("span",null,[(0,s._)("i",{class:"fa-solid fa-chevron-right",onClick:a[10]||(a[10]=e=>r.pageMove("next"))})])])])}t(7658);var L=t(1779);const A=e=>((0,s.dD)("data-v-dceec100"),e=e(),(0,s.Cn)(),e),M={class:"reviewBox"},K={class:"gradeBox"},$=A((()=>(0,s._)("span",null,"평점 : ",-1))),z=["onClick"],H=A((()=>(0,s._)("label",{for:"submitButton",class:"reviewBtn submitBtn"},"작 성",-1))),Y=A((()=>(0,s._)("button",{id:"submitButton",hidden:""},null,-1)));function U(e,a,t,n,o,r){return(0,s.wg)(),(0,s.iD)("div",M,[(0,s._)("form",{onSubmit:a[2]||(a[2]=(0,c.iM)(((...e)=>r.reviewSubmitCheck&&r.reviewSubmitCheck(...e)),["prevent"]))},[(0,s._)("div",K,[$,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.starData,(e=>((0,s.wg)(),(0,s.iD)("i",{key:e,class:(0,l.C_)(`fa-${e.star} fa-star`),onClick:a=>r.gradeSelect(e.grade)},null,10,z)))),128)),(0,s._)("span",{class:(0,l.C_)(o.reviewContent.length>=100?"warning":"")},(0,l.zw)(o.reviewContent.length)+"/100자",3)]),(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":a[0]||(a[0]=e=>o.reviewContent=e),class:"reviewContent",cols:"30",rows:"5",placeholder:"후기내용 작성"},null,512),[[c.nr,o.reviewContent]]),(0,s._)("span",{class:"reviewBtn closeBtn",onClick:a[1]||(a[1]=a=>e.$emit("box-close:box-close-click"))},"닫 기"),H,Y],32)])}var V=t(7516),q={props:{reserveId:{type:Number,required:!0}},emits:["box-close:box-close-click","reveiw-submit:submit-click"],data(){return{reviewContent:"",grade:"",starData:[]}},created(){this.starDataCreate()},methods:{starDataCreate(){this.starData=[];for(let e=1;e<6;e++)e<=this.grade?this.starData.push({star:"solid fullstar",grade:e}):this.starData.push({star:"regular",grade:e})},gradeSelect(e){this.grade=e,this.starDataCreate()},reviewSubmitCheck(){if(this.reviewContent)if(this.grade)this.reviewSubmit();else{let e="평점을 선택해 주세요.";this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",e)}else{let e="내용을 작성해 주세요.";this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",e)}},async reviewSubmit(){let e={reserveId:this.reserveId,content:this.reviewContent,grade:this.grade};console.log(e);try{let a=await(0,V._$)(e);console.log(a)}catch(a){console.log(a)}this.$emit("reveiw-submit:submit-click")}}},P=t(89);const W=(0,P.Z)(q,[["render",U],["__scopeId","data-v-dceec100"]]);var F=W,G={components:{FormReview:F},data(){return{reservationData:[],sortReserveStatusData:[{name:"전 체",value:"예약상태"},{name:"예약완료",value:"BOOKED"},{name:"이용완료",value:"USED"},{name:"이용자취소",value:"CANCELED_BY_USER"},{name:"사용자취소",value:"CANCELED_BY_HOST"},{name:"노쇼",value:"NOSHOW"}],sortSpaceTypeData:[{name:"전 체",value:"공간종류"},{name:"오피스",value:"1"},{name:"데스크",value:"2"},{name:"회의실",value:"3"}],sortReserveStatus:"예약상태",sortSpaceType:"공간종류",pageStartNum:1,pageNowNum:1,pageData:[],pageTotal:"",cancelIndex:"취소",cancelReasonIndex:"취소사유",reviewIndex:"리뷰",background:!1,cancelReason:"",reserveId:"",amountLeaveIndex:"잔금결제"}},created(){this.reservationDataCall(this.pageNowNum)},methods:{async reservationDataCall(e){this.reservationData=[],this.pageNowNum=e;let a=this.sortSpaceType,t=this.sortReserveStatus;try{"공간종류"==a&&(a=""),"예약상태"==t&&(t=""),console.log(e-1,a,t);let s=await(0,L.Kd)(e-1,a,t);this.reservationData=s.data.data,this.pageTotal=s.data.count,this.paging(this.pageNowNum)}catch(s){console.log(s)}this.$store.dispatch("SPINNERVIEW",!1)},roomTypeRename(e){return"DESK"==e?"데스크":"OFFICE"==e?"오피스":"회의실"},reserveStatusRename(e){return"BOOKED"==e?"예약완료":"CANCELED_BY_USER"==e?"사용자취소":"CANCELED_BY_HOST"==e?"호스트취소":"NOSHOW"==e?"노쇼":"사용완료"},paymentSatusRename(e,a,t){return"NOSHOW"==t||"REFUND"==a?"-":("0"==e?e="결제진행중":"1"==e&&(e="결제완료"),e)},reserveTime(e){const a=e.slice(0,10),t=e.slice(11,16);return`${a} ${t}`},cancelPossible(e){return"BOOKED"==e.reserveStatus},cancelReasonView(e){return"CANCELED_BY_USER"==e.reserveStatus||"CANCELED_BY_HOST"==e.reserveStatus},reviewPossible(e){return"USED"==e.reserveStatus&&null==e.reviewId},amountLeaveCheck(e){return"0"==e.paid&&"PREPAID"==e.paymentStatus&&("CANCELED_BY_USER"!=e.reserveStatus&&"CANCELED_BY_HOST"!=e.reserveStatus)},paging(e){this.pageData=[],this.pageNowNum=e;let a,t=this.pageTotal;this.pageTotal=t%10!=0?parseInt(t/10)+1:t/10,this.pageTotal<6?a=this.pageTotal+1:(a=this.pageStartNum+5,a>=this.pageTotal&&(a=this.pageTotal+1));for(let s=this.pageStartNum;s<a;s++)e==s?this.pageData.push({value:s,class:"pageNowNum"}):this.pageData.push({value:s,class:""})},pageMove(e){"next"==e?(this.pageStartNum==this.pageTotal-1||(this.pageStartNum=this.pageStartNum+5),this.paging(this.pageStartNum)):(1==this.pageStartNum||(this.pageStartNum=this.pageStartNum-5),this.paging(this.pageStartNum)),this.reservationDataCall(this.pageNowNum)},boxOpen(e,a,t){this.boxClose(),"cancel"==e?this.cancelIndex=a:"cancelReason"==e?this.cancelReasonIndex=a:"amountLeave"==e?this.amountLeaveIndex=a:(this.reviewIndex=a,this.reserveId=t.reserveId),this.background=!0,this.reservationDataCall(this.pageNowNum)},boxClose(){this.cancelIndex="취소",this.cancelReasonIndex="취소사유",this.reviewIndex="리뷰",this.reserveId="",this.amountLeaveIndex="잔금결제",this.background=!1},reviewSubmit(){this.boxClose(),this.reservationDataCall(this.pageNowNum)},async reservationCancel(e){if(this.dateCheck(e)){let e="30분전 예약은 취소할 수 없습니다.";return this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",e),!1}if(this.cancelReason.length>=100){let e="취소사유가 100자를 초과했습니다.";return this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",e),!1}if(""==this.cancelReason.length){let e="취소사유가 비어있습니다.";return this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",e),!1}let a={reserveId:e.reserveId,cencelReason:this.cancelReason};console.log(a),this.cancelIndex="취소번호",this.cancelReason="";try{let e=await(0,L.GK)(a);console.log(e),this.boxClose(),this.reservationDataCall(this.pageNowNum)}catch(t){console.log(t)}},dateCheck(e){console.log(e.bookDate);let a=e.bookDate.checkInDate,t=e.bookDate.checkInTime;const s=new Date,n=s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate(),o=s.getHours(),r=s.getMinutes();if(n==a&&t+1==o&&r>=30)return!0},async paymentLeave(e){const a={roomId:e.rooomId,reserveAmount:e.reserveAmount,payAmount:.8*e.reserveAmount,payStatus:e.paymentStatus,reserveId:e.reserveId},t={pg:"kakaopay",pay_method:"card",merchant_uid:e.pays[0].merchantUid+"잔금",name:e.roomName,amount:.8*e.reserveAmount};console.log(a),console.log(t);try{const{IMP:e}=window;e.init("imp38067385"),e.request_pay(t,(e=>{e.success?(console.log("결제 성공"),console.log(e),a.merchant_uid=e.merchant_uid,a.imp_uid=e.imp_uid,console.log(a),this.reservationPaymentSubmit(a)):(console.log("결제 실패"),console.log(e))}))}catch(s){console.log(s)}this.boxClose()},async reservationPaymentSubmit(e){console.log("DB넣기"),console.log(e);try{let a=await(0,L.HD)(e);console.log(a),this.reservationDataCall(this.pageNowNum)}catch(a){console.log(a)}}}};const Z=(0,P.Z)(G,[["render",B],["__scopeId","data-v-22046b39"]]);var j=Z;const J=e=>((0,s.dD)("data-v-553ca27b"),e=e(),(0,s.Cn)(),e),Q={class:"reservationContainer"},X={class:"reservationTitle"},ee=J((()=>(0,s._)("option",{value:"예약상태",hidden:""}," 예약상태 ",-1))),ae=["value"],te=J((()=>(0,s._)("option",{value:"공간종류",hidden:""}," 공간종류 ",-1))),se=["value"],ne={class:"reservationItems"},oe=(0,s.uE)('<div class="reservationItem" data-v-553ca27b><span class="reserveIdTitle itemTitle" data-v-553ca27b>예약번호</span><span class="roomTypeTitle" data-v-553ca27b>방종류</span><span class="roomNameTitle itemTitle" data-v-553ca27b>방이름</span><span class="reserveTimeTitle itemTitle" data-v-553ca27b>예약일</span><span class="reserveInOutTitle itemTitle" data-v-553ca27b>입/퇴실</span><span class="reservaStatusTitle" data-v-553ca27b>예약상태</span><span class="amountTitle itemTitle" data-v-553ca27b>금액</span><span class="reservationCancel itemTitle" data-v-553ca27b>비 고</span></div>',1),re={class:"roomName"},ie={class:"reserveTime"},le={class:"reserveInOut"},ce={class:"amount"},ue=["onClick"],pe={key:1,class:"reservationCancelBox"},ve=["onClick"],me=["onClick"],he={key:3,class:"reservationDoneBox"},de=J((()=>(0,s._)("p",null,"해당 예약을 이용완료처리 하시겠습니까?",-1))),ge=["onClick"],Ce=["onClick"],De={key:5,class:"reservationCancelReasonBox"},we={class:"pageNumber"},ke=["onClick"];function Se(e,a,t,n,o,r){return(0,s.wg)(),(0,s.iD)("div",Q,[o.background?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"background",onClick:a[0]||(a[0]=e=>r.boxClose())})):(0,s.kq)("",!0),(0,s._)("div",X,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>o.sortReserveStatus=e),class:"sortBox",onChange:a[2]||(a[2]=e=>r.reservationDataCall(o.pageNowNum))},[ee,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.sortReserveStatusData,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e,value:e.value},(0,l.zw)(e.name),9,ae)))),128))],544),[[c.bM,o.sortReserveStatus]]),(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>o.sortSpaceType=e),class:"sortBox",onChange:a[4]||(a[4]=e=>r.reservationDataCall(o.pageNowNum))},[te,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.sortSpaceTypeData,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e,value:e.value},(0,l.zw)(e.name),9,se)))),128))],544),[[c.bM,o.sortSpaceType]])]),(0,s._)("div",ne,[oe,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.reservationData,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"reservationItem"},[(0,s._)("span",{class:(0,l.C_)(["reserveId",e.paymentStatus])},(0,l.zw)(e.reserveId),3),(0,s._)("span",{class:(0,l.C_)(["roomType",e.roomType])},(0,l.zw)(r.roomTypeRename(e.roomType)),3),(0,s._)("span",re,(0,l.zw)(e.roomName),1),(0,s._)("span",ie,(0,l.zw)(r.reserveTime(e.bookDate.reserveDate)),1),(0,s._)("span",le,(0,l.zw)(r.InOutTime(e)),1),(0,s._)("span",{class:(0,l.C_)(["reserveStatus",e.reserveStatus])},(0,l.zw)(r.reserveStatusRename(e.reserveStatus)),3),(0,s._)("span",ce,(0,l.zw)(e.reserveAmount),1),r.cancelPossible(e)?((0,s.wg)(),(0,s.iD)("span",{key:0,class:"reservationCancelBtn",onClick:e=>r.boxOpen("cancel",t)},"예약취소",8,ue)):(0,s.kq)("",!0),o.cancelIndex==t?((0,s.wg)(),(0,s.iD)("div",pe,[(0,s._)("p",{class:(0,l.C_)(o.cancelReason.length>=100?"warning":"")},(0,l.zw)(o.cancelReason.length)+"/100자 ",3),(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":a[5]||(a[5]=e=>o.cancelReason=e),cols:"30",rows:"5",placeholder:"취소사유를 입력해주세요"},null,512),[[c.nr,o.cancelReason]]),(0,s._)("span",{class:"closeBtn",onClick:a[6]||(a[6]=e=>r.boxClose())},"닫기"),(0,s._)("span",{class:"cancelBtn",onClick:a=>r.reservationCancelOK(e)},"취소",8,ve)])):(0,s.kq)("",!0),r.cancelPossible(e)?((0,s.wg)(),(0,s.iD)("span",{key:2,class:"reservationDoneBtn",onClick:e=>r.boxOpen("done",t)},"이용완료",8,me)):(0,s.kq)("",!0),o.reservationDone==t?((0,s.wg)(),(0,s.iD)("div",he,[de,(0,s._)("span",{class:"closeBtn",onClick:a[7]||(a[7]=e=>r.boxClose())},"닫기"),(0,s._)("span",{class:"doneBtn",onClick:a=>r.reservationDoneOK(e)},"완료",8,ge)])):(0,s.kq)("",!0),r.cancelReasonView(e)?((0,s.wg)(),(0,s.iD)("span",{key:4,class:"cancelReason",onClick:e=>r.boxOpen("cancelReason",t)},"취소사유보기",8,Ce)):(0,s.kq)("",!0),o.cancelReasonIndex==t?((0,s.wg)(),(0,s.iD)("div",De,[(0,s._)("p",null,(0,l.zw)(e.cancelReason),1),(0,s._)("span",{class:"closeBtn",onClick:a[8]||(a[8]=e=>r.boxClose())},"닫기")])):(0,s.kq)("",!0)])))),128))]),(0,s._)("div",we,[(0,s._)("span",null,[(0,s._)("i",{class:"fa-solid fa-chevron-left monthMoveBtn",onClick:a[9]||(a[9]=e=>r.pageMove("pre"))})]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pageData,(e=>((0,s.wg)(),(0,s.iD)("span",{key:e,class:(0,l.C_)(e.class),onClick:a=>r.paging(e.value)},(0,l.zw)(e.value),11,ke)))),128)),(0,s._)("span",null,[(0,s._)("i",{class:"fa-solid fa-chevron-right",onClick:a[10]||(a[10]=e=>r.pageMove("next"))})])])])}var _e={data(){return{reservationData:[],sortReserveStatusData:[{name:"전 체",value:""},{name:"예약완료",value:"DEPOSIT"},{name:"이용완료",value:"USED"},{name:"이용자취소",value:"CANCELED_BY_USER"},{name:"사용자취소",value:"CANCELED_BY_HOST"},{name:"노쇼",value:"NOSHOW"},{name:"취소/환불",value:"REFUND"}],sortSpaceTypeData:[{name:"전 체",value:""},{name:"오피스",value:"1"},{name:"데스크",value:"2"},{name:"회의실",value:"3"}],sortReserveStatus:"예약상태",sortSpaceType:"공간종류",pageStartNum:1,pageNowNum:1,pageData:[],pageTotal:"",cancelIndex:"취소번호",cancelReason:"",cancelReasonIndex:"취소사유",background:!1,reservationDone:"이용완료"}},created(){this.reservationDataCall(this.pageNowNum)},methods:{async reservationDataCall(e){this.reservationData=[],this.pageNowNum=e;let a=this.sortSpaceType,t=this.sortReserveStatus;try{"공간종류"==a&&(a=""),"예약상태"==t&&(t=""),console.log(e-1,a,t);let s=await(0,L.Kd)(e-1,a,t);this.reservationData=s.data.data,this.pageTotal=s.data.count,this.paging(this.pageNowNum)}catch(s){console.log(s)}this.$store.dispatch("SPINNERVIEW",!1)},roomTypeRename(e){return"DESK"==e?"데스크":"OFFICE"==e?"오피스":"회의실"},reserveStatusRename(e){return"BOOKED"==e?"예약완료":"CANCELED_BY_USER"==e?"사용자취소":"CANCELED_BY_HOST"==e?"호스트취소":"NOSHOW"==e?"노쇼":"사용완료"},paymentSatusRename(e,a){return"REFUND"==a?"-":("0"==e?e="결제진행중":"1"==e&&(e="결제완료"),e)},reserveTime(e){const a=e.slice(0,10),t=e.slice(11,16);return`${a} ${t}`},InOutTime(e){if(console.log(e),"OFFICE"==e.roomType)return`${e.bookDate.checkInDate}~${e.bookDate.checkOutDate}`;{let a=e.bookDate.checkInTime,t=e.bookDate.checkOutTime;return a<10&&(a="0"+a),t<10&&(t="0"+t),`${e.bookDate.checkInDate} ${a}:00~${t}:00`}},cancelPossible(e){return"BOOKED"==e.reserveStatus},cancelReasonView(e){return"CANCELED_BY_USER"==e.reserveStatus||"CANCELED_BY_HOST"==e.reserveStatus},paging(e){this.pageData=[],this.pageNowNum=e;let a=this.reservationData.length;this.pageTotal=a%10!=0?parseInt(a/10)+1:a/10;let t=this.pageStartNum+5;t>=this.pageTotal&&(t=this.pageTotal),1==this.pageTotal&&this.pageData.push({value:"1",class:"pageNowNum"});for(let s=this.pageStartNum;s<t;s++)e==s?this.pageData.push({value:s,class:"pageNowNum"}):this.pageData.push({value:s,class:""})},pageMove(e){"next"==e?(this.pageStartNum=this.pageStartNum+5,this.paging(this.pageStartNum)):(1==this.pageStartNum&&this.paging(this.pageStartNum),this.pageStartNum=this.pageStartNum-5,this.paging(this.pageStartNum)),this.reservationDataCall(this.pageNowNum)},boxOpen(e,a){this.boxClose(),"cancel"==e?this.cancelIndex=a:"cancelReason"==e?this.cancelReasonIndex=a:this.reservationDone=a,this.background=!0},boxClose(){this.cancelIndex="취소번호",this.cancelReasonIndex="취소사유",this.cancelReason="",this.reservationDone="이용완료",this.background=!1},async reservationCancelOK(e){if(this.cancelReason.length>=100){let e="취소사유가 100자를 초과했습니다.";return this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",e),!1}if(""==this.cancelReason.length){let e="취소사유가 비어있습니다.";return this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",e),!1}let a={reserveId:e.reserveId,cancelReason:this.cancelReason};console.log(a);try{let e=await(0,L.GK)(a);console.log(e),this.boxClose(),this.reservationDataCall(this.pageNowNum)}catch(t){console.log(t)}},async reservationDoneOK(e){try{let a=await(0,L.fZ)(e.reserveId);console.log(a),this.boxClose(),this.reservationDataCall(this.pageNowNum)}catch(a){console.log(a)}}}};const Ne=(0,P.Z)(_e,[["render",Se],["__scopeId","data-v-553ca27b"]]);var be=Ne,ye={components:{userReservationVue:j,hostReservationVue:be},data(){return{role:this.$store.state.role}}};const Ie=(0,P.Z)(ye,[["render",i],["__scopeId","data-v-523ab447"]]);var xe=Ie}}]);
//# sourceMappingURL=735.c9f81c05.js.map