"use strict";(self["webpackChunkworktalk"]=self["webpackChunkworktalk"]||[]).push([[70],{18:function(i,e,a){a.r(e),a.d(e,{default:function(){return W}});var t=a(3396);const o=i=>((0,t.dD)("data-v-96d2ae8a"),i=i(),(0,t.Cn)(),i),s={class:"loginPage"},n=o((()=>(0,t._)("h1",null,"워크토크 로그인",-1)));function l(i,e,a,o,l,d){const c=(0,t.up)("form-login");return(0,t.wg)(),(0,t.iD)("div",s,[n,(0,t.Wm)(c)])}var d=a(9242);const c=i=>((0,t.dD)("data-v-45d84203"),i=i(),(0,t.Cn)(),i),r={key:0,class:"loginBackground"},p={key:1,class:"findBoxEmail"},h={key:0,class:"approve"},k={key:1,class:"warning"},u={key:2,class:"findBoxPw"},m={key:0,class:"approve"},f={key:1,class:"warning"},C={class:"loginFromItems"},w={key:0,class:"warning"},E={class:"loginFromItems"},g=c((()=>(0,t._)("div",{class:"loginFromItems"},[(0,t._)("button",{id:"submit"}," 로그인 ")],-1))),y={class:"helpBox"},_=c((()=>(0,t._)("span",null,"회원가입",-1))),V={class:"kakaoLogin"},v=c((()=>(0,t._)("p",null,"또는",-1))),I=c((()=>(0,t._)("img",{src:"//k.kakaocdn.net/14/dn/btqCn0WEmI3/nijroPfbpCa4at5EIsjyf0/o.jpg"},null,-1))),x=[I];function L(i,e,a,o,s,n){const l=(0,t.up)("router-link");return(0,t.wg)(),(0,t.iD)("div",null,[""!=s.findBoxType?((0,t.wg)(),(0,t.iD)("div",r)):(0,t.kq)("",!0),"email"==s.findBoxType?((0,t.wg)(),(0,t.iD)("div",p,[(0,t._)("i",{class:"fa-solid fa-xmark findBoxClose fa-lg",onClick:e[0]||(e[0]=(...i)=>n.findBoxClose&&n.findBoxClose(...i))}),(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":e[1]||(e[1]=i=>s.findEmail=i),class:"findEmail",type:"text",placeholder:"가입한 이메일을 입력해주세요."},null,512),[[d.nr,s.findEmail]]),(0,t._)("input",{class:"findEmailBtn",type:"button",value:"조회",onClick:e[2]||(e[2]=i=>n.emailVeificaionSend("email"))}),200==s.emailVerificationCodeCheck?((0,t.wg)(),(0,t.iD)("p",h," 가입된 이메일입니다. ")):(0,t.kq)("",!0),500==s.emailVerificationCodeCheck?((0,t.wg)(),(0,t.iD)("p",k," 가입되지 않은 이메일입니다. ")):(0,t.kq)("",!0)])):(0,t.kq)("",!0),"pw"==s.findBoxType?((0,t.wg)(),(0,t.iD)("div",u,[(0,t._)("i",{class:"fa-solid fa-xmark findBoxClose fa-lg",onClick:e[3]||(e[3]=(...i)=>n.findBoxClose&&n.findBoxClose(...i))}),(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":e[4]||(e[4]=i=>s.findEmail=i),class:"findEmail",type:"text",placeholder:"가입한 이메일을 입력해주세요."},null,512),[[d.nr,s.findEmail]]),(0,t._)("input",{class:"findEmailBtn",type:"button",value:"임시비밀번호발급",onClick:e[5]||(e[5]=i=>n.emailVeificaionSend("pw"))}),200==s.emailVerificationCodeCheck?((0,t.wg)(),(0,t.iD)("p",m," 임시비밀번호가 발급되었습니다. ")):(0,t.kq)("",!0),500==s.emailVerificationCodeCheck?((0,t.wg)(),(0,t.iD)("p",f," 가입되지 않은 이메일입니다. ")):(0,t.kq)("",!0)])):(0,t.kq)("",!0),(0,t._)("form",{class:"loginForm",onSubmit:e[11]||(e[11]=(0,d.iM)(((...i)=>n.loginCkeck&&n.loginCkeck(...i)),["prevent"]))},[(0,t._)("div",C,[(0,t.wy)((0,t._)("input",{id:"email","onUpdate:modelValue":e[6]||(e[6]=i=>s.email=i),type:"text",placeholder:"이메일"},null,512),[[d.nr,s.email]]),!n.userEmailValid&&s.email?((0,t.wg)(),(0,t.iD)("span",w,"이메일 형식이 아닙니다.")):(0,t.kq)("",!0)]),(0,t._)("div",E,[(0,t.wy)((0,t._)("input",{id:"pw","onUpdate:modelValue":e[7]||(e[7]=i=>s.pw=i),type:"password",placeholder:"비밀번호"},null,512),[[d.nr,s.pw]])]),g,(0,t._)("div",y,[(0,t._)("span",{onClick:e[8]||(e[8]=i=>n.findBoxOpen("email"))},"이메일확인"),(0,t._)("span",{onClick:e[9]||(e[9]=i=>n.findBoxOpen("pw"))},"비밀번호찾기"),(0,t.Wm)(l,{to:"/join"},{default:(0,t.w5)((()=>[_])),_:1})]),(0,t._)("div",V,[v,(0,t._)("a",{onClick:e[10]||(e[10]=i=>n.kakaoLogin())},x)])],32)])}a(7658);var B=a(9895);function D(i){let e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(String(i).toLowerCase())}var $=a(1598),A={data(){return{email:"",pw:"",findEmail:"",emailVerificationCodeCheck:"",findBoxType:""}},computed:{userEmailValid(){return D(this.email)}},created(){console.log(),this.$route.query.token&&this.kakaoTokenCall()},methods:{loginCkeck(){let i="";this.email?this.userEmailValid?this.pw?this.loginOk():(i="비밀번호를 입력해주세요.",this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",i)):(i="이메일 형식으로 입력해주세요.",this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",i)):(i="이메일을 입력해주세요.",this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",i))},async loginOk(){const i={email:this.email,pw:this.pw};this.pwClear();try{const e=await this.$store.dispatch("LOGIN",i),a=(0,$.Z)(e.token);"ROLE_HOST"==a.auth?this.$router.push("/host"):"ROLE_MASTER"==a.auth?this.$router.push("/master"):this.$router.push("/")}catch(e){let i="이메일과 비밀번호를 확인해주세요.";this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",i)}},pwClear(){this.pw=""},findBoxOpen(i){this.findBoxType=i},findBoxClose(){this.findBoxType="",this.findEmail="",this.emailVerificationCodeCheck=""},async emailVeificaionSend(i){this.$store.dispatch("SPINNERVIEW",!0);try{let e;e="pw"==i?await(0,B.te)(this.findEmail):await(0,B.TS)(this.findEmail),console.log(e),this.emailVerificationCodeCheck=e.status}catch(e){console.log(e),this.emailVerificationCodeCheck=e.request.status}this.$store.dispatch("SPINNERVIEW",!1)},kakaoLogin(){window.Kakao.Auth.authorize({redirectUri:"http://15.165.247.125:8100/user/kakao/callback"})},async kakaoTokenCall(){try{const i=this.$route.query.code;await this.$store.dispatch("KAKAOLOGIN",i);let e="예약을 이용하시려면 전화번호를 입력해주세요.";this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",e),this.$router.push("/profile")}catch(i){console.log(i)}}}},O=a(89);const S=(0,O.Z)(A,[["render",L],["__scopeId","data-v-45d84203"]]);var M=S,q={components:{FormLogin:M},created(){this.$store.dispatch("SPINNERVIEW",!1)}};const T=(0,O.Z)(q,[["render",l],["__scopeId","data-v-96d2ae8a"]]);var W=T}}]);
//# sourceMappingURL=70.c83d532b.js.map