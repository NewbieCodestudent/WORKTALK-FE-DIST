"use strict";(self["webpackChunkworktalk"]=self["webpackChunkworktalk"]||[]).push([[590],{3067:function(e,t,a){a.d(t,{Pf:function(){return r},SK:function(){return p},ZP:function(){return u},_u:function(){return o},dQ:function(){return l},dq:function(){return c},k2:function(){return n},qv:function(){return m},uJ:function(){return i}});var s=a(3376);function n(){return s.x.get("host/spaceAll")}function c(){return s.x.get("hostActivated")}function i(e){return s.x.post("host/spaceCreate",e,{headers:{"Content-Type":"multipart/form-data"}})}function l(e,t){return s.x.post("host/spaceUpdate/"+e,t,{headers:{"Content-Type":"multipart/form-data"}})}function r(e){return s.x["delete"]("spaceImgDelete",{params:{spaceImgId:e}})}function p(e){return s.x.post("host/roomCreate",e,{headers:{"Content-Type":"multipart/form-data"}})}function o(e,t){return s.x.post("host/roomUpdate/"+e,t,{headers:{"Content-Type":"multipart/form-data"}})}function u(e){return s.x["delete"]("roomImgDelete",{params:{roomImgId:e}})}function m(e){return s.x["delete"]("host/spaceDelete/"+e)}},2900:function(e,t,a){a.d(t,{JY:function(){return i},Ju:function(){return p},OS:function(){return o},Zy:function(){return r},aq:function(){return c},bQ:function(){return n},lC:function(){return l}});var s=a(3376);function n(e,t,a,n,c,i,l,r){return s.e.get("main",{params:{pageNum:e,searchSpaceType:t,searchSpaceName:a,searchAddress:n,searchStartDate:c,searchEndDate:i,searchStartTime:l,searchEndTime:r}})}function c(e){return s.e.get("spaceOne/"+e)}function i(){return s.x.get("member/isValid")}function l(e){return s.e.get("spaceOne/"+e+"/rooms")}function r(e){return s.e.get("roomOne/"+e)}function p(){return s.x.get("mileage/total")}function o(){return s.x.get("mileage")}},5890:function(e,t,a){a.r(t),a.d(t,{default:function(){return z}});var s=a(3396);const n={class:"backgound"};function c(e,t,a,c,i,l){const r=(0,s.up)("space-update-from");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s.Wm)(r)])}var i=a(9242),l=a(7139);const r=e=>((0,s.dD)("data-v-4df38c96"),e=e(),(0,s.Cn)(),e),p={class:"createBox"},o={class:"spaceType"},u=r((()=>(0,s._)("span",null,"공간정보수정",-1))),m={class:"spaceTypeItems"},d=["src"],g={class:"boxName"},h={class:"spaceDetail boxName"},f=r((()=>(0,s._)("span",null,"공간소개",-1))),I=["placeholder"],D={key:0,class:"warning warningMsg"},C=r((()=>(0,s._)("span",{class:"boxName"},"업로드된 사진",-1))),w={class:"imgBox"},v=["onClick"],_=["src"],y=r((()=>(0,s._)("span",{class:"boxName"},"추가 업로드",-1))),k={class:"imgBox"},x=["onClick"],T=["src"],S={class:"addImgBox"},b=r((()=>(0,s._)("label",{for:"imgBtn",class:"addImgBtn"},"사진추가",-1))),U=r((()=>(0,s._)("button",{class:"submit"}," 수 정 ",-1)));function L(e,t,n,c,r,L){return(0,s.wg)(),(0,s.iD)("div",p,[(0,s._)("form",{class:"createFrom",enctype:"multipart/form-data",onSubmit:t[3]||(t[3]=(0,i.iM)(((...e)=>L.spaceUpdateCheck&&L.spaceUpdateCheck(...e)),["prevent"]))},[(0,s._)("div",o,[u,(0,s._)("div",m,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.spaceTypeItems,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:t,class:(0,l.C_)(["spaceTypeItem",r.spaceTypeSelectData==e.value?"selectType":"noSelectType"])},[(0,s._)("img",{class:"spaceTypeIcon",src:a(7173)(`./${e.img}`),alt:"icon"},null,8,d),(0,s._)("p",null,(0,l.zw)(e.name),1)],2)))),128))])]),(0,s._)("div",g,[(0,s._)("p",null,"공간명 : "+(0,l.zw)(r.spaceItems.spaceName),1),(0,s._)("p",null,"공간주소 : ("+(0,l.zw)(r.spaceItems.postcode)+")"+(0,l.zw)(r.spaceItems.address)+" "+(0,l.zw)(r.spaceItems.detailAddress),1),(0,s._)("p",null,"사업자번호 : "+(0,l.zw)(r.spaceItems.regCode),1)]),(0,s._)("div",h,[f,(0,s._)("span",{class:(0,l.C_)(["textCount",{warning:r.spaceDetailCount>=100}])},(0,l.zw)(r.spaceDetailCount)+"/100자",3),(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.spaceItems.spaceDetail=e),class:"inputBox spaceDetailBox",name:"",rows:"5",placeholder:r.spaceItems.spaceDetail,onKeyup:t[1]||(t[1]=(...e)=>L.spaceDetailCountCheck&&L.spaceDetailCountCheck(...e))},null,40,I),[[i.nr,r.spaceItems.spaceDetail]]),r.spaceDetailCount>=100?((0,s.wg)(),(0,s.iD)("p",D," 설명은 100자까지 가능합니다. ")):(0,s.kq)("",!0)]),C,(0,s._)("div",w,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.spaceItems.spaceImgList,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"filePreview"},[(0,s._)("i",{class:"fa-solid fa-trash-can fa-lg imgDelete",onClick:t=>L.spaceImgDelete(e)},null,8,v),(0,s._)("img",{class:"preViewImg",src:e.spaceImgUrl},null,8,_)])))),128))]),y,(0,s._)("div",k,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.spaceImgPreview,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"filePreview"},[(0,s._)("i",{class:"fa-solid fa-xmark imgDelete fa-lg",onClick:t=>L.fileDeleteButton(e.num)},null,8,x),(0,s._)("img",{class:"preViewImg",src:e.url},null,8,T)])))),128)),(0,s._)("div",S,[b,(0,s._)("input",{id:"imgBtn",ref:"spaceImg",type:"file",multiple:"",accept:".jpg, .png",hidden:"",onChange:t[2]||(t[2]=e=>L.fileUpload(e))},null,544)])]),U],32)])}a(7658);var P=a(2900),B=a(3067),$={data(){return{spaceItems:[],spaceImg:[],spaceImgPreview:[],spaceDetailCount:"0",spaceTypeItems:[{name:"오피스",img:"office.png",value:"1"},{name:"데스크",img:"table.png",value:"2"},{name:"회의실",img:"meeting.png",value:"3"}],spaceTypeSelectData:this.$route.params.spaceType}},async created(){await this.spaceDataCall()},methods:{async spaceDataCall(){const e=await(0,P.aq)(this.$route.params.spaceId);console.log(e.data[0]),this.spaceItems=e.data[0],this.spaceDetailCount=this.spaceItems.spaceDetail.length},fileUpload(e){for(let t=0;t<e.target.files.length;t++)this.spaceImg=[...this.spaceImg,{file:e.target.files[t],num:t}];for(let t=0;t<e.target.files.length;t++)this.spaceImgPreview.push({url:URL.createObjectURL(e.target.files[t]),num:t})},fileDeleteButton(e){for(let t=0;t<this.spaceImg.length;t++)this.spaceImg[t].num==e&&this.spaceImg.splice(t,1);for(let t=0;t<this.spaceImgPreview.length;t++)this.spaceImgPreview[t].num==e&&this.spaceImgPreview.splice(t,1)},spaceDetailCountCheck(){return this.spaceDetailCount=this.spaceItems.spaceDetail.length},async spaceImgDelete(e){const t=await(0,B.Pf)(e.spaceImgId);console.log(t),this.spaceDataCall()},spaceUpdateCheck(){let e="";this.spaceItems.spaceDetail?this.spaceItems.spaceDetail.length>100?(e="공간명이 100자를 초과하였습니다.",this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",e)):this.spaceUpdate():(e="공간설명을 작성해주세요.",this.$store.dispatch("MODALVIEWCLICK",!0),this.$store.dispatch("MODALMESSAGE",e))},async spaceUpdate(){try{let e=new FormData;if(e.append("spaceId",this.spaceItems.spaceId),e.append("spaceDetail",this.spaceItems.spaceDetail),e.append("imageUrlList",this.spaceItems.spaceImgList),0!=this.spaceImg.length)for(let a=0;a<this.spaceImg.length;a++)e.append("multipartFileList",this.spaceImg[a].file),console.log(this.spaceImg[a].file);for(let a of e.keys())console.log(`${a}:${e.get(a)}`);const t=await(0,B.dQ)(this.spaceItems.spaceId,e);console.log(t),200==t.status&&(alert("공간이 수정되었습니다."),this.$router.push("/host"))}catch(e){console.log(e)}}}},A=a(89);const E=(0,A.Z)($,[["render",L],["__scopeId","data-v-4df38c96"]]);var N=E,O={components:{SpaceUpdateFrom:N},created(){this.$store.dispatch("SPINNERVIEW")}};const M=(0,A.Z)(O,[["render",c],["__scopeId","data-v-2caf3075"]]);var z=M}}]);
//# sourceMappingURL=590.9b51a529.js.map